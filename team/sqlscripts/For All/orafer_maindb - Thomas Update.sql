-- MySQL Script generated by MySQL Workbench
-- 02/26/15 02:05:39
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema conforg_db
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema conforg_db
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `conforg_db` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ;
USE `conforg_db` ;

-- -----------------------------------------------------
-- Table `conforg_db`.`company`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `conforg_db`.`company` ;

CREATE TABLE IF NOT EXISTS `conforg_db`.`company` (
  `Company_id` INT(11) NOT NULL AUTO_INCREMENT,
  `Company_name` VARCHAR(255) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  PRIMARY KEY (`Company_id`))
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;

INSERT INTO `company` (`Company_id`, `Company_name`) VALUES
(1, 'Expo');


-- -----------------------------------------------------
-- Table `conforg_db`.`users`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `conforg_db`.`users` ;

CREATE TABLE IF NOT EXISTS `conforg_db`.`users` (
  `user_id` INT(11) NOT NULL AUTO_INCREMENT,
  `firstname` VARCHAR(255) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `lastname` VARCHAR(255) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `email` VARCHAR(255) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `email_temp` VARCHAR(255) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `password` VARCHAR(255) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `password_temp` VARCHAR(255) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `remember_token` VARCHAR(100) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `code` VARCHAR(60) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `active` INT(11) NULL DEFAULT NULL,
  `created_at` DATETIME NULL DEFAULT NULL,
  `updated_at` DATETIME NULL DEFAULT NULL,
  PRIMARY KEY (`user_id`),
  UNIQUE INDEX `users_email_unique` (`email` ASC))
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;

INSERT INTO `users` (`user_id`, `firstname`, `lastname`, `email`, `email_temp`, `password`, `password_temp`, `remember_token`, `code`, `active`, `created_at`, `updated_at`) VALUES
(1, 'Bella', 'Ratmelia', 'bella.ratmelia@gmail.com', NULL, '$2y$10$zk0eNrBzSo1E83QVyESrm.2.MVlTz2aQiFMKBEPWfTFLhVfv1hMxG', NULL, 'QKb8qBIktNpLxh5M2gHtNkpXCaM17uokcPYyEvRQEHZcyqkcDCtL2wPnKzlX', '', 1, '2015-02-25 09:39:34', '2015-02-25 09:41:27'),
(2, 'Noverinda', 'Bella', 'bella.ratmelia@hotmail.com', NULL, '$2y$10$VnvQKbqSNcwGwBMH.y0rXe/vyJ91MfVLDSKL/JTEJQQoBoY3I/18S', NULL, 'yX4RMHllzUbFXO38wmpn1tytNCvv2nRbE1ugDJZK8TH6psh4ub94kSyoccUK', '', 1, '2015-02-25 09:41:44', '2015-02-25 09:42:29'),
(3, 'Reviewer', 'Thomas', 'batmanray@live.com.sg', NULL, '$2y$10$alAVwg4moSwWGlXYfM.lsu6XGguF1V9XuffI.ShKN3.CrCgM4ovzu', NULL, 'ZGytiNEwuVO1xir74zgPCcgieiCq0hxHItgs7R6g1zkdDVATe1Rpj86TSQC3', '', 1, '2015-02-25 09:42:27', '2015-02-25 09:54:18'),
(4, 'Resource Provider', 'Poh Jun', 'pohjun.ng@hotmail.sg', NULL, '$2y$10$8fqu6qMH1EVpzX2Gv58dbOAO7OLaGiSptpBuAMLXURURwoi0H3vOW', NULL, NULL, NULL, 1, '2015-02-25 09:54:47', '2015-02-25 09:54:47'),
(5, 'Participant', 'Thomas', 'thomas.leera@gmail.com', NULL, '$2y$10$OCHmGIUjfj/ENHp2j7kWSe55O40ASD6ZZ9VEASaazAA4BI8KS2xXm', NULL, 'jkqxTBl8vvvkQVpIqrex4M1oX0asD7TawWRlcRfdaWRkKjtOCE2i8Qk7Z2fH', '', 1, '2015-02-25 09:57:17', '2015-02-25 09:57:46'),
(6, 'admin', 'orafer', 'admin@orafer.com', NULL, '$2y$10$kX/HtiXsmoojqsfy9.Q5zeGt9EjodjK1SerS7iE4EH542w5r7vdUu', NULL, NULL, '', 1, '2015-02-25 09:58:48', '2015-02-25 09:59:34'),
(7, 'Author', 'Poh Jun', 'pohjun.ng@gmail.com', NULL, '$2y$10$x8mmQ4BF/IAoGMSNZ3BkjegqeUen8j/mQRAXV6aJJj29tqrH8BAOq', NULL, 'sgIVoLrXmqTehyRUtaeSryotB9kFhI74eVVIHPlL4HrLdpRnwWMzhe0I0cbI', '', 1, '2015-02-25 10:15:30', '2015-02-25 14:32:34');



-- -----------------------------------------------------
-- Table `conforg_db`.`company_user`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `conforg_db`.`company_user` ;

CREATE TABLE IF NOT EXISTS `conforg_db`.`company_user` (
  `company_user_id` INT(11) NOT NULL AUTO_INCREMENT,
  `company_id` INT(11) NULL,
  `user_id` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`company_user_id`),
  INDEX `company_user_id_foreign_idx` (`user_id` ASC),
  INDEX `company_company_id_foreign_idx` (`company_id` ASC),
  CONSTRAINT `company_user_id_foreign`
    FOREIGN KEY (`user_id`)
    REFERENCES `conforg_db`.`users` (`user_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `company_company_id_foreign`
    FOREIGN KEY (`company_id`)
    REFERENCES `conforg_db`.`company` (`Company_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


INSERT INTO `company_user` (`company_user_id`, `company_id`, `user_id`) VALUES
(1, 1, 4);


-- -----------------------------------------------------
-- Table `conforg_db`.`conference`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `conforg_db`.`conference` ;

CREATE TABLE IF NOT EXISTS `conforg_db`.`conference` (
  `conf_id` INT(11) NOT NULL AUTO_INCREMENT,
  `title` VARCHAR(100) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NOT NULL,
  `description` TEXT CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NOT NULL,
  `begin_date` DATE NOT NULL,
  `begin_time` DATETIME NOT NULL,
  `end_date` DATE NOT NULL,
  `end_time` DATETIME NOT NULL,
  `is_free` BIT(1) NOT NULL DEFAULT b'0',
  `cutoff_time` DATETIME NULL DEFAULT NULL,
  `min_score` DOUBLE NULL DEFAULT NULL,
  `ticket_price` DECIMAL(10,2) NOT NULL DEFAULT '0.00',
  `created_by` INT(11) NOT NULL,
  `modified_by` INT(11) NULL DEFAULT NULL,
  `created_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` DATETIME NULL DEFAULT NULL,
  PRIMARY KEY (`conf_id`),
  UNIQUE INDEX `Title` (`title` ASC))
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;

INSERT INTO `conference` (`conf_id`, `title`, `description`, `begin_date`, `begin_time`, `end_date`, `end_time`, `is_free`, `cutoff_time`, `min_score`, `ticket_price`, `created_by`, `modified_by`, `created_at`, `updated_at`) VALUES
(1, '8th Annual International Conference on Computer Games Multimedia and Allied Technologies (CGAT 2015)', '						<p style="text-align: justify; margin-bottom: 14px; padding: 0px;"><span style="color: rgb(0, 0, 0); font-family: Arial, Helvetica, sans; font-size: 11px; line-height: 14px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi varius sed', '2015-06-01', '2015-06-01 08:30:00', '2015-06-02', '2015-06-02 16:00:00', b'0', '2015-04-30 00:00:00', 60, '110.00', 1, 1, '2015-01-17 04:25:10', '2015-02-17 13:08:30'),
(2, '6th Annual International Conference on ICT: Big Data, Cloud and Security ', 'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.', '2015-05-04', '2015-05-04 09:00:00', '2015-05-05', '2015-05-05 17:00:00', b'0', '2015-03-31 00:00:00', 70, '150.00', 2, 1, '2015-01-17 04:25:58', '2015-02-18 16:12:55');

-- -----------------------------------------------------
-- Table `conforg_db`.`interest_field`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `conforg_db`.`interest_field` ;

CREATE TABLE IF NOT EXISTS `conforg_db`.`interest_field` (
  `interestfield_id` INT(11) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `remarks` VARCHAR(45) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `created_by` INT(11) NOT NULL,
  `modified_by` INT(11) NULL DEFAULT NULL,
  `created_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` DATETIME NULL DEFAULT NULL,
  PRIMARY KEY (`interestfield_id`))
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;

INSERT INTO `interest_field` (`interestfield_id`, `name`, `remarks`, `created_by`, `modified_by`, `created_at`, `updated_at`) VALUES
(1, 'Computer Science', NULL, 0, NULL, '2015-01-14 06:48:26', NULL),
(2, 'Artificial Intelligence', NULL, 0, NULL, '2015-01-14 06:48:35', NULL),
(3, 'Databases', NULL, 0, NULL, '2015-01-14 06:48:45', NULL),
(4, 'Human-Computer Interaction', NULL, 0, NULL, '2015-01-14 06:48:57', NULL),
(5, 'Computer Security', NULL, 0, NULL, '2015-01-14 06:49:03', NULL),
(6, 'Internet Technology', NULL, 0, NULL, '2015-01-14 06:49:08', NULL),
(7, 'Open Source', NULL, 0, NULL, '2015-01-14 06:49:28', NULL),
(8, 'E-commerce', NULL, 0, NULL, '2015-01-14 06:49:38', NULL),
(9, 'Networking', NULL, 0, NULL, '2015-01-14 06:49:38', NULL),
(10, 'Mobile Technology', NULL, 0, NULL, '2015-01-14 06:49:38', NULL);


-- -----------------------------------------------------
-- Table `conforg_db`.`conference_field`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `conforg_db`.`conference_field` ;

CREATE TABLE IF NOT EXISTS `conforg_db`.`conference_field` (
  `conferencefield_id` INT(11) NOT NULL AUTO_INCREMENT,
  `conf_id` INT(11) NOT NULL,
  `interestfield_id` INT(11) NOT NULL,
  `created_by` INT(11) NOT NULL,
  `modified_by` INT(11) NULL DEFAULT NULL,
  `created_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` DATETIME NULL DEFAULT NULL,
  PRIMARY KEY (`conferencefield_id`),
  INDEX `conference_field_conf_id_foreign_idx` (`conf_id` ASC),
  INDEX `conference_field_interestfield_id_foreign_idx` (`interestfield_id` ASC),
  CONSTRAINT `conference_field_conf_id_foreign`
    FOREIGN KEY (`conf_id`)
    REFERENCES `conforg_db`.`conference` (`conf_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `conference_field_interestfield_id_foreign`
    FOREIGN KEY (`interestfield_id`)
    REFERENCES `conforg_db`.`interest_field` (`interestfield_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `conforg_db`.`venue`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `conforg_db`.`venue` ;

CREATE TABLE IF NOT EXISTS `conforg_db`.`venue` (
  `venue_id` INT(11) NOT NULL AUTO_INCREMENT,
  `venue_name` VARCHAR(45) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `venue_address` VARCHAR(45) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `latitude` VARCHAR(45) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `longitude` VARCHAR(45) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `created_by` INT(11) NOT NULL,
  `modified_by` INT(11) NULL DEFAULT NULL,
  `created_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` DATETIME NULL DEFAULT NULL,
  `company_id` INT(11) NULL DEFAULT NULL,
  `available` VARCHAR(45) NOT NULL DEFAULT 'yes',
  PRIMARY KEY (`venue_id`))
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;

INSERT INTO `venue` (`venue_id`, `venue_name`, `venue_address`, `latitude`, `longitude`, `created_by`, `modified_by`, `created_at`, `updated_at`) VALUES
(1, 'Sands Expo and Convention Centre', '10 Bayfront Avenue Singapore 018956', '1.283676', ' 103.860341', 1, NULL, '2015-01-24 04:28:23', '2015-02-18 16:12:57',1,'yes'),
(2, 'Singapore Expo ', '1 Expo Drive Singapore 486150', '1.332875', '103.9590039', 1, NULL, '2015-02-01 02:21:03', '2015-02-23 00:16:16',1,'yes'),
(3, 'Suntec Singapore Convention & Exhibition Cent', '1 Raffles Boulevard Singapore 039593', '1.293493', '103.857059', 1, NULL, '2015-02-01 02:21:03', '2015-02-18 16:12:57',1,'yes'),
(4, 'The Star Performing Arts Centre', '1 Vista Exchange Green\r\nSingapore 138617', '1.306839', '103.788440', 1, NULL, '2015-02-01 02:21:03', '2015-02-18 16:12:57',1,'yes');


-- -----------------------------------------------------
-- Table `conforg_db`.`room`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `conforg_db`.`room` ;

CREATE TABLE IF NOT EXISTS `conforg_db`.`room` (
  `room_id` INT(11) NOT NULL AUTO_INCREMENT,
  `venue_id` INT(11) NOT NULL,
  `room_name` VARCHAR(45) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `capacity` INT(45) NULL DEFAULT NULL,
  `rental_cost` DECIMAL(12,2) NULL DEFAULT NULL,
  `created_by` INT(11) NOT NULL,
  `modified_by` INT(11) NULL DEFAULT NULL,
  `created_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` DATETIME NULL DEFAULT NULL,
  `available` varchar(45) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'yes',
  PRIMARY KEY (`room_id`, `venue_id`),
  INDEX `room_venue_id_foreign_idx` (`venue_id` ASC),
  CONSTRAINT `room_venue_id_foreign`
    FOREIGN KEY (`venue_id`)
    REFERENCES `conforg_db`.`venue` (`venue_id`)
    ON DELETE CASCADE
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;

INSERT INTO `room` (`room_id`, `venue_id`, `room_name`, `capacity`, `rental_cost`, `created_by`, `modified_by`, `created_at`, `updated_at`) VALUES
(1, 2, 'Hall 1', 500, '500.00', 1, NULL, '2015-01-16 05:23:07', '2015-02-18 16:12:56','yes'),
(2, 2, 'Hall 2', 450, '550.00', 1, NULL, '2015-01-16 05:23:22', '2015-02-18 16:12:56','yes'),
(3, 2, 'Hall 3', 550, '600.00', 1, NULL, '2015-01-16 05:23:36', '2015-02-18 16:12:56','yes'),
(4, 2, 'Hall 4', 500, '1200.00', 1, NULL, '2015-02-01 02:23:18', '2015-02-18 16:12:56','yes'),
(5, 3, 'Summit 1 (Level 3)', 600, '1000.00', 1, NULL, '2015-02-01 02:23:18', '2015-02-18 16:12:56','yes'),
(6, 3, 'Summit 2 (Level 3)', 500, '1800.00', 1, NULL, '2015-02-01 02:23:18', '2015-02-18 16:12:56','yes'),
(7, 3, 'Auditorium (Level 6)', 1000, '2000.00', 1, NULL, '2015-02-01 02:23:18', '2015-02-18 16:12:56','yes'),
(8, 1, 'Hall A', 2500, '3300.00', 1, NULL, '2015-02-01 02:23:18', '2015-02-18 16:12:56','yes'),
(9, 1, 'Jasmine Ballroom', 800, '1100.00', 1, NULL, '2015-02-01 02:23:18', '2015-02-18 16:12:56','yes'),
(10, 4, 'The Star Theater', 800, '1100.00', 1, NULL, '2015-02-01 02:23:18', '2015-02-18 16:12:56','yes'),
(11, 4, 'The Star Gallery', 800, '1100.00', 1, NULL, '2015-02-01 02:23:18', '2015-02-18 16:12:56','yes');

-- -----------------------------------------------------
-- Table `conforg_db`.`conference_room_schedule`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `conforg_db`.`conference_room_schedule` ;

CREATE TABLE IF NOT EXISTS `conforg_db`.`conference_room_schedule` (
  `confroomschedule_id` INT(11) NOT NULL AUTO_INCREMENT,
  `conf_id` INT(11) NULL DEFAULT NULL,
  `room_id` INT(11) NULL DEFAULT NULL,
  `description` VARCHAR(45) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `date_start` DATE NULL DEFAULT NULL,
  `date_end` DATE NULL DEFAULT NULL,
  `begin_time` DATETIME NULL DEFAULT NULL,
  `end_time` DATETIME NULL DEFAULT NULL,
  `remarks` VARCHAR(45) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `created_by` INT(11) NOT NULL,
  `modified_by` INT(11) NULL DEFAULT NULL,
  `created_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` DATETIME NULL DEFAULT NULL,
  PRIMARY KEY (`confroomschedule_id`),
  INDEX `conference_room_schedule_conf_id_foreign_idx` (`conf_id` ASC),
  INDEX `conference_room_schedule_room_id_foreign_idx` (`room_id` ASC),
  CONSTRAINT `conference_room_schedule_conf_id_foreign`
    FOREIGN KEY (`conf_id`)
    REFERENCES `conforg_db`.`conference` (`conf_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `conference_room_schedule_room_id_foreign`
    FOREIGN KEY (`room_id`)
    REFERENCES `conforg_db`.`room` (`room_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `conforg_db`.`conference_topic`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `conforg_db`.`conference_topic` ;

CREATE TABLE IF NOT EXISTS `conforg_db`.`conference_topic` (
  `topic_id` INT(11) NOT NULL AUTO_INCREMENT,
  `conf_id` INT(11) NOT NULL,
  `topic_name` VARCHAR(50) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NOT NULL,
  `created_by` INT(11) NOT NULL,
  `modified_by` INT(11) NULL DEFAULT NULL,
  `created_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` DATETIME NULL DEFAULT NULL,
  PRIMARY KEY (`topic_id`),
  INDEX `conference_topic_conf_id_foreign_idx` (`conf_id` ASC),
  CONSTRAINT `conference_topic_conf_id_foreign`
    FOREIGN KEY (`conf_id`)
    REFERENCES `conforg_db`.`conference` (`conf_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `conforg_db`.`roles`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `conforg_db`.`roles` ;

CREATE TABLE IF NOT EXISTS `conforg_db`.`roles` (
  `role_id` INT(11) NOT NULL AUTO_INCREMENT,
  `rolename` VARCHAR(255) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NOT NULL,
  `remarks` VARCHAR(255) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NOT NULL,
  PRIMARY KEY (`role_id`),
  UNIQUE INDEX `roles_rolename_unique` (`rolename` ASC))
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `conforg_db`.`confuserrole`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `conforg_db`.`confuserrole` ;

CREATE TABLE IF NOT EXISTS `conforg_db`.`confuserrole` (
  `confuserrole_id` INT(10) NOT NULL AUTO_INCREMENT,
  `role_id` INT(10) NOT NULL,
  `user_id` INT(10) NOT NULL,
  `conf_id` INT(11) NOT NULL,
  PRIMARY KEY (`confuserrole_id`),
  INDEX `confuserrole_role_id_index_01` (`role_id` ASC),
  INDEX `confuserrole_user_id_index_02` (`user_id` ASC),
  INDEX `confuserrole_conf_id_foreign` (`conf_id` ASC),
  CONSTRAINT `confuserrole_conf_id_foreign`
    FOREIGN KEY (`conf_id`)
    REFERENCES `conforg_db`.`conference` (`conf_id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `confuserrole_role_id_foreign`
    FOREIGN KEY (`role_id`)
    REFERENCES `conforg_db`.`roles` (`role_id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `confuserrole_user_id_foreign`
    FOREIGN KEY (`user_id`)
    REFERENCES `conforg_db`.`users` (`user_id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_bin;

INSERT INTO `confuserrole` (`confuserrole_id`, `role_id`, `user_id`, `conf_id`) VALUES
(1, 4, 1, 1),
(2, 4, 2, 2),
(3, 7, 3, 1),
(4, 7, 3, 2),
(5, 7, 1, 2);

-- -----------------------------------------------------
-- Table `conforg_db`.`countries`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `conforg_db`.`countries` ;

CREATE TABLE IF NOT EXISTS `conforg_db`.`countries` (
  `country_id` INT(5) NOT NULL AUTO_INCREMENT,
  `short_name` VARCHAR(80) NOT NULL DEFAULT '',
  `long_name` VARCHAR(80) NOT NULL DEFAULT '',
  `calling_code` VARCHAR(8) NULL DEFAULT NULL,
  PRIMARY KEY (`country_id`))
ENGINE = MyISAM
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = latin1;


-- -----------------------------------------------------
-- Table `conforg_db`.`equipment_category`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `conforg_db`.`equipment_category` ;

CREATE TABLE IF NOT EXISTS `conforg_db`.`equipment_category` (
  `equipmentcategory_id` INT(11) NOT NULL AUTO_INCREMENT,
  `equipmentcategory_name` VARCHAR(45) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `equipmentcategory_remark` VARCHAR(45) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `created_by` INT(11) NOT NULL,
  `modified_by` INT(11) NULL DEFAULT NULL,
  `created_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` DATETIME NULL DEFAULT NULL,
  `status` varchar(45) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'Pending',
  PRIMARY KEY (`equipmentcategory_id`))
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `conforg_db`.`equipment`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `conforg_db`.`equipment` ;

CREATE TABLE IF NOT EXISTS `conforg_db`.`equipment` (
  `equipment_id` INT(11) NOT NULL AUTO_INCREMENT,
  `equipmentcategory_id` INT(11) NOT NULL DEFAULT '0',
  `equipment_name` VARCHAR(45) NULL DEFAULT NULL,
  `equipment_remark` VARCHAR(45) NULL DEFAULT NULL,
  `rental_cost` VARCHAR(45) NULL DEFAULT NULL,
  `created_by` INT(11) NOT NULL,
  `modified_by` INT(11) NULL DEFAULT NULL,
  `created_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` DATETIME NULL DEFAULT NULL,
  PRIMARY KEY (`equipment_id`, `equipmentcategory_id`),
  INDEX `equipment_equipmentcategory_id_foreign_idx` (`equipmentcategory_id` ASC),
  CONSTRAINT `equipment_equipmentcategory_id_foreign`
    FOREIGN KEY (`equipmentcategory_id`)
    REFERENCES `conforg_db`.`equipment_category` (`equipmentcategory_id`)
    ON DELETE CASCADE
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = latin1;


-- -----------------------------------------------------
-- Table `conforg_db`.`invitation` 0 remove user_id`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `conforg_db`.`invitation` ;

CREATE TABLE IF NOT EXISTS `conforg_db`.`invitation` (
  `invite_id` INT(11) NOT NULL AUTO_INCREMENT,
  `code` VARCHAR(255) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `email` VARCHAR(255) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `company` VARCHAR(255) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  PRIMARY KEY (`invite_id`))
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;

INSERT INTO `invitation` (`invite_id`, `code`, `email`, `company`) VALUES
(5, 'PGevFfZcgdOffwuVS24g6HQdQdTIOQVw9du44Vb83e8kgObNLmbkeREvqd6l', 'pohjun.ng@hotmail.sg', 'Expo');

-- -----------------------------------------------------
-- Table `conforg_db`.`invoice`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `conforg_db`.`invoice` ;

CREATE TABLE IF NOT EXISTS `conforg_db`.`invoice` (
  `invoice_id` INT(11) NOT NULL AUTO_INCREMENT,
  `user_id` INT(11) NOT NULL,
  `conf_id` INT(11) NOT NULL,
  `quantity` INT(3) NOT NULL,
  `price` FLOAT NOT NULL,
  `created_by` INT(11) NOT NULL,
  `modified_by` INT(11) NULL DEFAULT NULL,
  `created_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` DATETIME NULL DEFAULT NULL,
  `total` FLOAT NULL DEFAULT NULL,
  `status` VARCHAR(45) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT 'unpaid',
  PRIMARY KEY (`invoice_id`),
  INDEX `invoice_conf_id_foreign_idx` (`conf_id` ASC),
  INDEX `invoice_user_id_foreign_idx` (`user_id` ASC),
  CONSTRAINT `invoice_conf_id_foreign`
    FOREIGN KEY (`conf_id`)
    REFERENCES `conforg_db`.`conference` (`conf_id`)
    ON DELETE CASCADE
    ON UPDATE NO ACTION,
  CONSTRAINT `invoice_user_id_foreign`
    FOREIGN KEY (`user_id`)
    REFERENCES `conforg_db`.`users` (`user_id`)
    ON DELETE CASCADE
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `conforg_db`.`submissions`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `conforg_db`.`submissions` ;

CREATE TABLE IF NOT EXISTS `conforg_db`.`submissions` (
  `sub_id` INT(11) NOT NULL AUTO_INCREMENT,
  `user_id` INT(11) NOT NULL,
  `conf_id` INT(11) NOT NULL,
  `sub_type` INT(11) NOT NULL,
  `sub_title` VARCHAR(220) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NOT NULL,
  `sub_abstract` TEXT CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NOT NULL,
  `attachment_path` VARCHAR(220) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NOT NULL,
  `sub_remarks` TEXT CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NOT NULL,
  `status` TINYINT(1) NOT NULL COMMENT '1 = accepted, 9 = rejected, 0 = on review',
  `overall_score` INT(11) NOT NULL DEFAULT '0',
  `created_by` INT(11) NOT NULL,
  `modified_by` INT(11) NULL DEFAULT NULL,
  `created_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` DATETIME NULL DEFAULT NULL,
  PRIMARY KEY (`sub_id`),
  UNIQUE INDEX `submissions_subtitle_unique` (`sub_title` ASC),
  INDEX `submission_conf_id_foreign_idx` (`conf_id` ASC),
  INDEX `submission_user_id_foreign_idx` (`user_id` ASC),
  CONSTRAINT `submission_conf_id_foreign`
    FOREIGN KEY (`conf_id`)
    REFERENCES `conforg_db`.`conference` (`conf_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `submission_user_id_foreign`
    FOREIGN KEY (`user_id`)
    REFERENCES `conforg_db`.`users` (`user_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;

-- -----------------------------------------------------
-- Table `conforg_db`.`keywords`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `conforg_db`.`keywords` ;

CREATE TABLE IF NOT EXISTS `conforg_db`.`keywords` (
  `keyword_id` INT(11) NOT NULL AUTO_INCREMENT,
  `keyword_name` VARCHAR(50) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NOT NULL,
  `sub_id` INT(11) NOT NULL,
  `created_by` INT(11) NOT NULL,
  `modified_by` INT(11) NULL DEFAULT NULL,
  `created_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` DATETIME NULL DEFAULT NULL,
  PRIMARY KEY (`keyword_id`, `sub_id`),
  INDEX `keywords_sub_id_foreign_idx` (`sub_id` ASC),
  CONSTRAINT `keywords_sub_id_foreign`
    FOREIGN KEY (`sub_id`)
    REFERENCES `conforg_db`.`submissions` (`sub_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `conforg_db`.`payment`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `conforg_db`.`payment` ;

CREATE TABLE IF NOT EXISTS `conforg_db`.`payment` (
  `payment_id` INT(11) NOT NULL AUTO_INCREMENT,
  `invoice_id` INT(11) NOT NULL,
  `amount` FLOAT NOT NULL,
  `payment_type` INT(11) NOT NULL,
  `created_by` INT(11) NOT NULL,
  `modified_by` INT(11) NULL DEFAULT NULL,
  `created_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` DATETIME NULL DEFAULT NULL,
  PRIMARY KEY (`payment_id`),
  INDEX `payment_invoice_id_foreign_idx` (`invoice_id` ASC),
  CONSTRAINT `payment_invoice_id_foreign`
    FOREIGN KEY (`invoice_id`)
    REFERENCES `conforg_db`.`invoice` (`invoice_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `conforg_db`.`pending`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `conforg_db`.`pending` ;

CREATE TABLE IF NOT EXISTS `conforg_db`.`pending` (
  `pending_id` INT(11) NOT NULL AUTO_INCREMENT,
  `user_id` INT(11) NULL DEFAULT NULL,
  `equipment_id` INT(11) NULL DEFAULT NULL,
  `equipmentcategory_id` INT(11) NULL DEFAULT NULL,
  `room_id` INT(11) NULL DEFAULT NULL,
  `venue_id` INT(11) NULL DEFAULT NULL, 
  `modified_by` INT(11) NULL DEFAULT NULL,
  `created_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` DATETIME NULL DEFAULT NULL,
  PRIMARY KEY (`pending_id`),
  INDEX `pending_user_id_foreign_idx` (`user_id` ASC),
  INDEX `pending_equipment_id_foreign_idx` (`equipment_id` ASC),
  INDEX `pending_equipmentcategory_id_foreign_idx` (`equipmentcategory_id` ASC),
  INDEX `pending_room_id_foreign_idx` (`room_id` ASC),
  INDEX `pending_venue_id_foreign_idx` (`venue_id` ASC),
  CONSTRAINT `pending_user_id_foreign`
    FOREIGN KEY (`user_id`)
    REFERENCES `conforg_db`.`users` (`user_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `pending_equipment_id_foreign`
    FOREIGN KEY (`equipment_id`)
    REFERENCES `conforg_db`.`equipment` (`equipment_id`)
    ON DELETE CASCADE
    ON UPDATE NO ACTION,
  CONSTRAINT `pending_equipmentcategory_id_foreign`
    FOREIGN KEY (`equipmentcategory_id`)
    REFERENCES `conforg_db`.`equipment_category` (`equipmentcategory_id`)
    ON DELETE CASCADE
    ON UPDATE NO ACTION,
  CONSTRAINT `pending_room_id_foreign`
    FOREIGN KEY (`room_id`)
    REFERENCES `conforg_db`.`room` (`room_id`)
    ON DELETE CASCADE
    ON UPDATE NO ACTION,
  CONSTRAINT `pending_venue_id_foreign`
    FOREIGN KEY (`venue_id`)
    REFERENCES `conforg_db`.`venue` (`venue_id`)
    ON DELETE CASCADE
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `conforg_db`.`permissions`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `conforg_db`.`permissions` ;

CREATE TABLE IF NOT EXISTS `conforg_db`.`permissions` (
  `permission_Id` INT(11) NOT NULL,
  `permission_name` VARCHAR(255) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NOT NULL,
  `permission_remarks` VARCHAR(255) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NOT NULL,
  PRIMARY KEY (`permission_Id`),
  UNIQUE INDEX `permission_name_UNIQUE` (`permission_name` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `conforg_db`.`profiles` -removed the country_id` 
-- -----------------------------------------------------
DROP TABLE IF EXISTS `conforg_db`.`profiles` ;

CREATE TABLE IF NOT EXISTS `conforg_db`.`profiles` (
  `profile_id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `fb_email` VARCHAR(255) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NOT NULL,
  `user_id` INT(11) NOT NULL,
  `uid` BIGINT(20) UNSIGNED NOT NULL,
  `access_token` VARCHAR(255) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NOT NULL,
  `created_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `bio` TEXT CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `location` VARCHAR(255) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL,
  `photo` VARCHAR(255) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL, 
  PRIMARY KEY (`profile_id`),
  INDEX `profiles_user_id_foreign_idx` (`user_id` ASC),  
  CONSTRAINT `profiles_user_id_foreign`
    FOREIGN KEY (`user_id`)
    REFERENCES `conforg_db`.`users` (`user_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;

INSERT INTO `profiles` (`profile_id`, `fb_email`, `user_id`, `uid`, `access_token`, `created_at`, `updated_at`, `bio`, `location`, `photo`) VALUES
(1, '', 1, 0, '', '0000-00-00 00:00:00', '0000-00-00 00:00:00', 'Hi! Thanks for visiting', NULL, NULL),
(2, '', 2, 0, '', '0000-00-00 00:00:00', '0000-00-00 00:00:00', 'Hi! Thanks for visiting', NULL, NULL),
(3, '', 3, 0, '', '0000-00-00 00:00:00', '0000-00-00 00:00:00', 'Hi! Thanks for visiting', NULL, NULL),
(4, '', 4, 0, '', '0000-00-00 00:00:00', '0000-00-00 00:00:00', 'Hi! Thanks for visiting', NULL, NULL),
(5, '', 5, 0, '', '0000-00-00 00:00:00', '0000-00-00 00:00:00', 'Hi! Thanks for visiting', NULL, NULL),
(6, '', 6, 0, '', '0000-00-00 00:00:00', '0000-00-00 00:00:00', 'Hi! Thanks for visiting', NULL, NULL),
(7, 'pohjun.ng@gmail.com', 7, 10152916861920967, 'CAAV2KrdSapcBAOaIiG4F7eGmwVC5XpMUFSWWshHKR84zpJfpz7MPMUG9zucZCOAsGZA7zRsKersHdUVyC0vLTXngE3YYDo0IgrIZCkfGthrJpAnzZCgZBFbNr4ioAwEWUaVIVHwhRsZAdHj3YWL4L1jZBkTBZBcteklZBeJyw3jEZA9nbrDfO9o0K5xRZCuMxd8TqTKobmmSKTqKqjTCo8vL37l', '0000-00-00 00:00:00', '0000-00-00 00:00:00', 'Hi! Thanks for visiting', NULL, 'https://graph.facebook.com/10152916861920967/picture?type=normal');



-- -----------------------------------------------------
-- Table `conforg_db`.`reviews`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `conforg_db`.`reviews` ;

CREATE TABLE IF NOT EXISTS `conforg_db`.`reviews` (
  `review_id` INT(11) NOT NULL AUTO_INCREMENT,
  `sub_id` INT(11) NOT NULL,
  `user_id` INT(11) NOT NULL,
  `internal_comment` TEXT CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NOT NULL,
  `comment` TEXT CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NOT NULL,
  `quality_score` INT(11) NOT NULL,
  `relevance_score` INT(11) NOT NULL,
  `originality_score` INT(11) NOT NULL,
  `significance_score` INT(11) NOT NULL,
  `presentation_score` INT(11) NOT NULL,
  `created_by` INT(11) NOT NULL,
  `modified_by` INT(11) NULL DEFAULT NULL,
  `created_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` DATETIME NULL DEFAULT NULL,
  PRIMARY KEY (`review_id`),
  INDEX `reviews_sub_id_foreign_idx` (`sub_id` ASC),
  INDEX `reviews_user_id_foreign_idx` (`user_id` ASC),
  CONSTRAINT `reviews_sub_id_foreign`
    FOREIGN KEY (`sub_id`)
    REFERENCES `conforg_db`.`submissions` (`sub_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `reviews_user_id_foreign`
    FOREIGN KEY (`user_id`)
    REFERENCES `conforg_db`.`users` (`user_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `conforg_db`.`role_permission`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `conforg_db`.`role_permission` ;

CREATE TABLE IF NOT EXISTS `conforg_db`.`role_permission` (
  `rolepermission_id` INT(11) NOT NULL AUTO_INCREMENT,
  `role_id` INT(11) NULL DEFAULT NULL,
  `permission_id` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`rolepermission_id`),
  INDEX `role_permission_role_id_foreign_idx` (`role_id` ASC),
  INDEX `role_permission_permission_id_foreign_idx` (`permission_id` ASC),
  CONSTRAINT `role_permission_role_id_foreign`
    FOREIGN KEY (`role_id`)
    REFERENCES `conforg_db`.`roles` (`role_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `role_permission_permission_id_foreign`
    FOREIGN KEY (`permission_id`)
    REFERENCES `conforg_db`.`permissions` (`permission_Id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `conforg_db`.`room_equipment`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `conforg_db`.`room_equipment` ;

CREATE TABLE IF NOT EXISTS `conforg_db`.`room_equipment` (
  `roomequipment_id` INT(11) NOT NULL AUTO_INCREMENT,
  `room_id` INT(11) NULL DEFAULT NULL,
  `equipment_id` INT(11) NULL DEFAULT NULL,
  `quantity` VARCHAR(45) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `remarks` VARCHAR(45) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `created_by` INT(11) NOT NULL,
  `modified_by` INT(11) NULL DEFAULT NULL,
  `created_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` DATETIME NULL DEFAULT NULL,
  `equipment_status` varchar(45) NOT NULL DEFAULT 'Pending',
  PRIMARY KEY (`roomequipment_id`),
  INDEX `room_equipment_equipment_id_foreign_idx` (`equipment_id` ASC),
  INDEX `room_equipment_roomt_id_foreign_idx` (`room_id` ASC),
  CONSTRAINT `room_equipment_equipment_id_foreign`
    FOREIGN KEY (`equipment_id`)
    REFERENCES `conforg_db`.`equipment` (`equipment_id`)
    ON DELETE CASCADE
    ON UPDATE NO ACTION,
  CONSTRAINT `room_equipment_room_id_foreign`
    FOREIGN KEY (`room_id`)
    REFERENCES `conforg_db`.`room` (`room_id`)
    ON DELETE CASCADE
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `conforg_db`.`submission_authors`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `conforg_db`.`submission_authors` ;

CREATE TABLE IF NOT EXISTS `conforg_db`.`submission_authors` (
  `sub_id` INT(11) NOT NULL,
  `email` VARCHAR(220) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NOT NULL,
  `first_name` VARCHAR(220) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NOT NULL,
  `last_name` VARCHAR(220) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NOT NULL,
  `organization` VARCHAR(220) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NOT NULL,
  `is_presenting` TINYINT(1) NOT NULL,
  `created_by` INT(11) NOT NULL,
  `modified_by` INT(11) NULL DEFAULT NULL,
  `created_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` DATETIME NULL DEFAULT NULL,
  PRIMARY KEY (`sub_id`, `email`),
  UNIQUE INDEX `submission_author_email_unique` (`email` ASC),
  CONSTRAINT `submission_authors_sub_id_foreign`
    FOREIGN KEY (`sub_id`)
    REFERENCES `conforg_db`.`submissions` (`sub_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `conforg_db`.`submission_topic`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `conforg_db`.`submission_topic` ;

CREATE TABLE IF NOT EXISTS `conforg_db`.`submission_topic` (
  `topic_id` INT(11) NOT NULL,
  `sub_id` INT(11) NOT NULL,
  `created_by` INT(11) NOT NULL,
  `modified_by` INT(11) NULL DEFAULT NULL,
  `created_at` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` DATETIME NULL DEFAULT NULL,
  PRIMARY KEY (`topic_id`, `sub_id`),
  INDEX `submission_topic_sub_id_foreign_idx` (`sub_id` ASC),
  CONSTRAINT `submission_topic_topic_id_foreign`
    FOREIGN KEY (`topic_id`)
    REFERENCES `conforg_db`.`conference_topic` (`topic_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `submission_topic_sub_id_foreign`
    FOREIGN KEY (`sub_id`)
    REFERENCES `conforg_db`.`submissions` (`sub_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;


-- -----------------------------------------------------
-- Table `conforg_db`.`sysrole`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `conforg_db`.`sysrole` ;

CREATE TABLE IF NOT EXISTS `conforg_db`.`sysrole` (
  `sysrole_id` INT(11) NOT NULL AUTO_INCREMENT,
  `user_id` INT(11) NULL DEFAULT NULL,
  `role_id` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`sysrole_id`),
  INDEX `sysrole_user_id_foreign_idx` (`user_id` ASC),
  INDEX `sysrole_role_id_foreign_idx` (`role_id` ASC),
  CONSTRAINT `sysrole_user_id_foreign`
    FOREIGN KEY (`user_id`)
    REFERENCES `conforg_db`.`users` (`user_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `sysrole_role_id_foreign`
    FOREIGN KEY (`role_id`)
    REFERENCES `conforg_db`.`roles` (`role_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 1
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;

INSERT INTO `sysrole` (`sysrole_id`, `user_id`, `role_id`) VALUES
(2, 1, 1),
(3, 2, 1),
(4, 3, 1),
(5, 4, 2),
(6, 5, 1),
(7, 6, 3),
(8, 7, 1);

-- -----------------------------------------------------
-- Table `conforg_db`.`conference_schedule_event`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `conforg_db`.`conference_schedule_event` ;

CREATE TABLE IF NOT EXISTS `conforg_db`.`conference_schedule_event` (
  `conference_schedule_event_id` INT(11) NOT NULL AUTO_INCREMENT,
  `conference_room_schedule_id` INT(11) NOT NULL,
  `submission_id` INT(11) NOT NULL,
  `title` VARCHAR(1000) NOT NULL,
  `day` DATE NOT NULL,
  `start` DATETIME NOT NULL,
  `end` DATETIME NOT NULL,
  `className` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`conference_schedule_event_id`),
  INDEX `conference_schedule_event_submission_id_foreign_idx` (`submission_id` ASC),
  INDEX `conference_schedule_event_conference_room_schedule_id_forei_idx` (`conference_room_schedule_id` ASC),
  CONSTRAINT `conference_schedule_event_submission_id_foreign`
    FOREIGN KEY (`submission_id`)
    REFERENCES `conforg_db`.`submissions` (`sub_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `conference_schedule_event_conference_room_schedule_id_foreign`
    FOREIGN KEY (`conference_room_schedule_id`)
    REFERENCES `conforg_db`.`conference_room_schedule` (`confroomschedule_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1;

INSERT INTO `conference_room_schedule` (`confroomschedule_id`, `conf_id`, `room_id`, `description`, `date_start`, `date_end`, `begin_time`, `end_time`, `remarks`, `created_by`, `modified_by`, `created_at`, `updated_at`) VALUES
(1, 1, 1, 'Testing', '2015-04-02', '2015-04-03', '2015-04-02 03:00:00', '2015-04-03 15:00:00', NULL, 0, NULL, '2015-02-14 13:46:09', '2015-02-18 16:12:56'),
(2, 2, 4, 'Testing', '2015-04-02', '2015-04-03', '2015-04-02 03:00:00', '2015-04-03 15:00:00', NULL, 0, NULL, '2015-02-14 13:46:09', '2015-02-18 16:12:56');


-- -----------------------------------------------------
-- Table `conforg_db`.`invitation_to_conference`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `conforg_db`.`invitation_to_conference` ;

CREATE TABLE IF NOT EXISTS `conforg_db`.`invitation_to_conference` (
  `invitation_to_conference_id` INT(11) NOT NULL AUTO_INCREMENT,
  `code` VARCHAR(255) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `email` VARCHAR(255) CHARACTER SET 'utf8' COLLATE 'utf8_unicode_ci' NULL DEFAULT NULL,
  `role_id` INT(11) NULL DEFAULT NULL,
  `conf_id` INT(11) NULL DEFAULT NULL,
  `is_used` BIT(1) NOT NULL DEFAULT b'0',
  `created_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` DATETIME NULL DEFAULT NULL,
  PRIMARY KEY (`invitation_to_conference_id`),
  INDEX `invitation_to_conference_conf_id_foreign_idx` (`conf_id` ASC),
  INDEX `invitation_to_conference_role_id_foreign_idx` (`role_id` ASC),
  CONSTRAINT `invitation_to_conference_conf_id_foreign`
    FOREIGN KEY (`conf_id`)
    REFERENCES `conforg_db`.`conference` (`conf_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `invitation_to_conference_role_id_foreign`
    FOREIGN KEY (`role_id`)
    REFERENCES `conforg_db`.`roles` (`role_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_unicode_ci;

USE `conforg_db`;

DELIMITER $$

USE `conforg_db`$$
DROP TRIGGER IF EXISTS `conforg_db`.`conference_BEFORE_INSERT` $$
USE `conforg_db`$$
CREATE TRIGGER `conference_BEFORE_INSERT` BEFORE INSERT ON `conference`
 FOR EACH ROW IF(NEW.cutoff_time IS NULL) THEN
BEGIN
SET NEW.cutoff_time = DATE_SUB(DATE_ADD(DATE_ADD(NEW.begin_date, INTERVAL 1 MONTH), INTERVAL 1 DAY), INTERVAL 1 second) ;
END;
END if$$


DELIMITER ;

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
